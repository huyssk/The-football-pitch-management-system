<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>

	<!-- META ============================================= -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content="" />
	<meta name="author" content="" />
	<meta name="robots" content="" />

	<!-- DESCRIPTION -->
	<meta name="description" content="EduChamp : Education HTML Template" />

	<!-- OG -->
	<meta property="og:title" content="EduChamp : Education HTML Template" />
	<meta property="og:description" content="EduChamp : Education HTML Template" />
	<meta property="og:image" content="" />
	<meta name="format-detection" content="telephone=no">

	<!-- FAVICONS ICON ============================================= -->
	<link rel="icon" th:href="@{/assets/images/favicon.ico}" type="image/x-icon" />
	<link rel="shortcut icon" type="image/x-icon" th:href="@{/assets/images/favicon.png}" />

	<!-- PAGE TITLE HERE ============================================= -->
	<title>SPM : Đặt sân bóng trực tuyến </title>

	<!-- MOBILE SPECIFIC ============================================= -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!--[if lt IE 9]>
	<script th:src="@{/assets/js/html5shiv.min.js}"></script>
	<script th:src="@{/assets/js/respond.min.js}"></script>
	<![endif]-->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<!-- All PLUGINS CSS ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/assets.css}">

	<!-- TYPOGRAPHY ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/typography.css}">

	<!-- SHORTCODES ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/shortcodes/shortcodes.css}">

	<!-- STYLESHEETS ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/css/style.css}">
	<link class="skin" rel="stylesheet" type="text/css" th:href="@{/assets/css/color/color-1.css}">

	<script>
		function submitLogoutForm() {
			document.getElementById('logoutForm').submit();
		}
	</script>
</head>
<body id="bg">
<div class="page-wraper">
	<div id="loading-icon-bx"></div>
	<!-- Header Top ==== -->
	<header class="header rs-nav">
		<div class="top-bar">
			<div class="container">
				<div class="row d-flex justify-content-between">
					<div class="topbar-left">
						<ul>
							<li><a href="faq-1.html"><i class="fa fa-question-circle"></i>Ask a Question</a></li>
							<li><a href="javascript:;"><i class="fa fa-envelope-o"></i>Support@website.com</a></li>
						</ul>
					</div>
					<div class="topbar-right">
						<ul>
							<li th:text="${#authentication.name == 'anonymousUser' ? '' : (#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)
        ? #authentication.principal.attributes['email']
        : #authentication.name)}"></li>
							<li th:if="${#authentication.name == 'anonymousUser'}"><a th:href="@{/showLoginPage}">Đăng nhập</a></li>
							<li th:if="${#authentication.name == 'anonymousUser'}"><a th:href="@{/register/showRegisterForm}">Đăng kí</a></li>
							<li><a th:if="${#authentication.name != 'anonymousUser'}" th:href="@{/view/profile(email=${#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)
        ? #authentication.principal.attributes['email'] : #authentication.name})}">Xem hồ sơ</a></li>
							<li th:if="${#authentication.name != 'anonymousUser'}">
								<form id="logoutForm" action="#" th:action="@{/logout}" method="post">
									<!-- No submit button here -->
								</form>
								<a href="#" th:if="${#authentication.name != 'anonymousUser'}" onclick="submitLogoutForm(); return false;">
									Thoát
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="sticky-header navbar-expand-lg">
			<div class="menu-bar clearfix">
				<div class="container clearfix">
					<!-- Header Logo ==== -->
					<div class="menu-logo">
						<a th:href="@{/spm/home}"><img th:src="@{/assets/images/logo.png}" alt=""></a>
					</div>
					<!-- Mobile Nav Button ==== -->
					<button class="navbar-toggler collapsed menuicon justify-content-end" type="button" data-toggle="collapse" data-target="#menuDropdown" aria-controls="menuDropdown" aria-expanded="false" aria-label="Toggle navigation">
						<span></span>
						<span></span>
						<span></span>
					</button>
					<!-- Author Nav ==== -->
					<div class="secondary-menu">
						<div class="secondary-inner">
							<ul>
								<li><a href="javascript:;" class="btn-link"><i class="fa fa-facebook"></i></a></li>
								<li><a href="javascript:;" class="btn-link"><i class="fa fa-google-plus"></i></a></li>
								<li><a href="javascript:;" class="btn-link"><i class="fa fa-linkedin"></i></a></li>
								<!-- Search Button ==== -->
								<li class="search-btn"><button id="quik-search-btn" type="button" class="btn-link"><i class="fa fa-search"></i></button></li>
							</ul>
						</div>
					</div>
					<!-- Search Box ==== -->
					<div class="nav-search-bar">
						<form action="#">
							<input name="search" value="" type="text" class="form-control" placeholder="Type to search">
							<span><i class="ti-search"></i></span>
						</form>
						<span id="search-remove"><i class="ti-close"></i></span>
					</div>
					<!-- Navigation Menu ==== -->
					<div class="menu-links navbar-collapse collapse justify-content-start" id="menuDropdown">
						<div class="menu-logo">
							<a href="index.html"><img th:src="@{assets/images/logo.png}" alt=""></a>
						</div>
						<ul class="nav navbar-nav">
							<li class="active"><a th:href="@{/spm/home}">Tất cả</a>
							</li>
							<li><a href="javascript:;">Sân 7</a>
							</li>
							<li class="add-mega-menu"><a href="javascript:;">Sân 5</a>
							</li>
							<li><a href="javascript:;">Sân futsal</i></a>
							</li>
							<li class="nav-dashboard" sec:authorize="hasRole('ROLE_ADMIN')">
								<a href="javascript:;" th:href="@{/admin/showEmployee}">Quản trị</a>
							</li>
							<li class="nav-dashboard" sec:authorize="hasRole('ROLE_EMPLOYEE')">
								<a href="javascript:;" th:href="@{/admin/tinhTrangSan}">Tình trạng sân</a>
							</li>
						</ul>
						<div class="nav-social-link">
							<a href="javascript:;"><i class="fa fa-facebook"></i></a>
							<a href="javascript:;"><i class="fa fa-google-plus"></i></a>
							<a href="javascript:;"><i class="fa fa-linkedin"></i></a>
						</div>
					</div>
					<!-- Navigation Menu END ==== -->
				</div>
			</div>
		</div>
	</header>
	<!-- header END ==== -->
	<!-- Content -->
	<div class="page-content bg-white">
		<!-- inner page banner -->
		<div class="page-banner ovbl-dark" style="background-image:url(assets/images/banner/banner1.jpg);">
			<div class="container">
				<div class="page-banner-entry">
					<h1 class="text-white">Hồ sơ</h1>

				</div>
			</div>
		</div>
		<!-- Breadcrumb row -->
		<div class="breadcrumb-row">
			<div class="container">
				<ul class="list-inline">
					<li><a th:href="@{/spm/home}">Trang chủ</a></li>
					<li>Hồ sơ</li>
				</ul>
			</div>
		</div>
		<!-- Breadcrumb row END -->
		<!-- inner page banner END -->
		<div class="content-block">
			<!-- About Us -->
			<div class="section-area section-sp1">
				<div class="container">
					<div class="row">
						<div class="col-lg-3 col-md-4 col-sm-12 m-b30">
							 <div class="profile-bx text-center">
								<div class="user-profile-thumb">
									<img th:src="@{/assets/images/profile/pic1.jpg}" alt=""/>
								</div>
								<div class="profile-info">
									<h4 th:text="${#authentication.name == 'anonymousUser' ? 'Account' : (#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)
        ? #authentication.principal.attributes['email']
        : #authentication.name)}"></h4>
								</div>
								<div class="profile-social">
									<ul class="list-inline m-a0">
										<li><a href="#"><i class="fa fa-facebook"></i></a></li>
										<li><a href="#"><i class="fa fa-twitter"></i></a></li>
										<li><a href="#"><i class="fa fa-linkedin"></i></a></li>
										<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
									</ul>
								</div>
								 <div class="profile-tabnav">
									 <ul class="nav nav-tabs">
										 <li class="nav-item">
											 <a class="nav-link" data-toggle="tab" href="#courses"><i class="ti-book"></i>Danh sách yêu thích</a>
										 </li>
										 <li class="nav-item">
											 <a class="nav-link" data-toggle="tab" href="#edit-profile"><i class="ti-pencil-alt"></i>Hồ sơ</a>
										 </li>
										 <li class="nav-item" th:if="${typeLog != null }">
											 <a class="nav-link" data-toggle="tab" href="#change-password"><i class="ti-lock"></i>Thay đổi mật khẩu</a>
										 </li>
										 <li class="nav-item">
											 <a class="nav-link" data-toggle="tab" href="#view-hoaDon"><i class="ti-pencil-alt"></i>Lịch sử đặt sân</a>
										 </li>
									 </ul>
								 </div>
							</div>
						</div>
						<div class="col-lg-9 col-md-8 col-sm-12 m-b30">
							<div class="profile-content-bx">
								<div class="tab-content">
									<div id="courses" class="tab-pane fade">
										<div class="profile-head">
											<h3>Danh sách yêu thích</h3>
										</div>
										<div class="courses-filter">
											<div class="clearfix" >
												<ul id="masonry" class="ttr-gallery-listing magnific-image row" >
													<li class="action-card col-xl-4 col-lg-6 col-md-12 col-sm-6 publish" th:each="sanBongYeuThich : ${sanBongYeuThichList}">
														<div class="cours-bx">
															<div class="action-box">
																<img th:src="${sanBongYeuThich.getHinhAnh()}" alt="">
																<a th:href="@{/view/delete-favorite-profile(idSanBongYeuThich=${sanBongYeuThich.getId()}, email=${#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)
        ? #authentication.principal.attributes['email'] : #authentication.name})}" class="btn">Xóa yêu thích</a>
															</div>
															<div class="info-bx text-center">
																<h5><a th:href="@{/view/san-bong-detail(idSanBong=${sanBongYeuThich.getId()}, email=${#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)
        ? #authentication.principal.attributes['email']
        : #authentication.name})}" th:text="${sanBongYeuThich.getTenSanBong()}"></a></h5>
																<span th:text="${sanBongYeuThich.getMoTaSan()}"></span>
																Địa chỉ: <span th:text="${sanBongYeuThich.getDiaDiem()}"></span>
															</div>
														</div>
													</li>
												</ul>
											</div>
										</div>
									</div>

									<div id="edit-profile" class="tab-pane fade">
										<div class="profile-head">
											<h3>Hồ sơ</h3><br>
											<div>*Quý khách xin vui lòng cập nhập thông tin cá nhân chính xác</div>
										</div>
										<form class="edit-profile" th:action="@{/view/update_profile}" th:object="${user}" method="post">
											<div class="">
												<div class="form-group row">
													<div class="col-12 col-sm-9 col-md-9 col-lg-10 ml-auto">
														<h3>1. Thông tin chi tiết</h3>
													</div>
												</div>
												<div th:object="${user}">
													<div class="form-group row">
														<label class="col-12 col-sm-3 col-md-3 col-lg-2 col-form-label" >Full Name</label>
														<div class="col-12 col-sm-9 col-md-9 col-lg-7" >
															<input class="form-control" th:field="*{fullName}">
															<div th:if="${#fields.hasErrors('fullName')}" th:errors="*{fullName}" class="alert alert-danger">Full Name Error</div>
														</div>
													</div>
													<div class="form-group row">
														<label class="col-12 col-sm-3 col-md-3 col-lg-2 col-form-label">Email</label>
														<div class="col-12 col-sm-9 col-md-9 col-lg-7">
															<input class="form-control" type="text" th:field="*{email}" readonly>
														</div>
													</div>
													<div class="form-group row">
														<label class="col-12 col-sm-3 col-md-3 col-lg-2 col-form-label">Phone Number</label>
														<div class="col-12 col-sm-9 col-md-9 col-lg-7">
															<input class="form-control" type="text" th:field="*{phoneNumber}">
															<div th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}" class="alert alert-danger">Phone Number Error</div>
														</div>
													</div>

													<input class="form-control" type="text" th:field="*{id}" hidden="hidden">

													<input class="form-control" type="text" th:field="*{password}" hidden="hidden">

													<input class="form-control" type="text" th:field="*{logType}" hidden="hidden">
													<input class="form-control" type="text" th:field="*{roles}" hidden="hidden">
												</div>
											</div>
											<div class="">
												<div class="">
													<div class="row">
														<div class="col-12 col-sm-3 col-md-3 col-lg-2">
														</div>
														<div class="col-12 col-sm-9 col-md-9 col-lg-7">
															<button type="submit" class="btn">Lưu thay đổi</button>
														</div>
													</div>
												</div>
											</div>
										</form>
									</div>
									<div id="change-password" class="tab-pane fade">
										<div class="profile-head">
											<h3>Thay đổi mật khẩu</h3>
										</div>
										<form class="edit-profile" action="#" th:action="@{/view/changePassword}" th:object="${changePassword}" method="post">
											<div class="">
												<div class="form-group row">
													<div class="col-12 col-sm-8 col-md-8 col-lg-9 ml-auto">
														<h3>Mật khẩu</h3>
													</div>
												</div>
												<p th:text="${message}" style="color: red"></p>
												<div class="form-group row">
													<label class="col-12 col-sm-4 col-md-4 col-lg-3 col-form-label">Mật khẩu cũ</label>
													<div class="col-12 col-sm-8 col-md-8 col-lg-7">
														<input class="form-control" type="password" th:field="*{oldPassword}">
													</div>
												</div>
												<div class="form-group row">
													<label class="col-12 col-sm-4 col-md-4 col-lg-3 col-form-label">Mật khẩu mới</label>
													<div class="col-12 col-sm-8 col-md-8 col-lg-7">
														<input class="form-control" type="password" th:field="*{newPassword}">
													</div>
												</div>
												<div class="form-group row">
													<label class="col-12 col-sm-4 col-md-4 col-lg-3 col-form-label">Xác nhận mật khẩu</label>
													<div class="col-12 col-sm-8 col-md-8 col-lg-7">
														<input class="form-control" type="password" th:field="*{comfirmPassword}">
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-12 col-sm-4 col-md-4 col-lg-3">
												</div>
												<div class="col-12 col-sm-8 col-md-8 col-lg-7">
													<button type="submit" class="btn">Lưu thay đổi</button>
													<button type="reset" class="btn-secondry">Hủy</button>
												</div>
											</div>

										</form>
									</div>
									<div id="view-hoaDon" class="tab-pane fade">
										<div class="profile-head">
											<h3>Sân đã đặt</h3>
										</div>
										<span>*Chỉ có thể hủy đặt sân trước 1 ngày</span><br>
										<span>*Bạn sẽ mất tiền cọc khi hủy sân thành công</span><br>
										<table class="table table-bordered table-striped">
											<tr class="table-info">
												<th>Tên sân bóng</th>
												<th>Ngày đá</th>
												<th>Giờ đá</th>
												<th>Ngày tạo</th>
												<th>Tiền cọc</th>
												<th>Hành động</th>
											</tr>
											<tr th:each="yctDTO : ${yeuCauThueDTOList}">
												<td th:text="${yctDTO.tensanBong}"></td>
												<td th:text="${yctDTO.ngayDa}"></td>
												<td th:text="${yctDTO.gioDa}"></td>
												<td th:text="${#dates.format(yctDTO.ngayTao, 'yyyy-MM-dd')}"></td>
												<td th:text="${#numbers.formatInteger(yctDTO.getTienSan()*0.2, 0, 'DEFAULT')}"></td>
												<td>
													<form th:action="@{/view/huy-san}" method="post" onsubmit="return confirmCancel(this);" style="display: inline-block;">
														<input type="hidden" name="id" th:value="${yctDTO.getId()}"/>
														<input type="hidden" name="note" value=""/>
														<button type="submit" th:if="${yctDTO.ngayDa.isAfter(ngayHienTai)}" class="btn" style="background-color: #d9534f; border-color: #d43f3a; color: white;">Hủy sân</button>
													</form>
													<span th:if="${yctDTO.ngayDa.isBefore(ngayHienTai) || yctDTO.ngayDa.isEqual(ngayHienTai)}"  class="btn" style="background-color: #6db19b; display: inline-block; border-color: #6db19b; color: white;">Hết hạn</span>
													<a class="btn btn-danger" th:href="@{/view/download(id=${yctDTO.getId()})}" style="display: inline-block;">Xuất hóa đơn</a>
												</td>
											</tr>
											<script>
												function confirmCancel(form) {
													var note = prompt("Bạn có muốn hủy sân đá này không? Vui lòng nhập ghi chú:");
													if (note !== null) {
														form.note.value = note;
														return true;
													}
													return false;
												}
											</script>
										</table>
									</div>
									<script>
										$(document).ready(function(){
											// Lấy tab đã lưu từ localStorage
											var activeTab = localStorage.getItem('activeTab');
											if (activeTab) {
												$('.nav-link[href="' + activeTab + '"]').addClass('active');
												$(activeTab).addClass('show active');
											} else {
												$('.nav-link').first().addClass('active');
												$('.tab-pane').first().addClass('show active');
											}

											$('.nav-link').click(function(){
												// Loại bỏ lớp active khỏi tất cả các tab
												$('.nav-link').removeClass('active');
												$('.tab-pane').removeClass('show active');

												// Thêm lớp active vào tab được nhấp
												$(this).addClass('active');
												$($(this).attr('href')).addClass('show active');

												// Lưu tab được nhấp vào localStorage
												var activeTab = $(this).attr('href');
												localStorage.setItem('activeTab', activeTab);
											});
										});
									</script>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- contact area END -->
	</div>
	<!-- Content END-->
	<!-- Footer ==== -->
	<footer>
		<div class="footer-top">
			<div class="pt-exebar">
				<div class="container">
					<div class="d-flex align-items-stretch">
						<div class="pt-logo mr-auto">
							<a href="#"><img src="assets/images/logo-white.png" alt=""/></a>
						</div>
						<div class="pt-social-link">
							<ul class="list-inline m-a0">
								<li><a href="#" class="btn-link"><i class="fa fa-facebook"></i></a></li>
								<li><a href="#" class="btn-link"><i class="fa fa-twitter"></i></a></li>
								<li><a href="#" class="btn-link"><i class="fa fa-linkedin"></i></a></li>
								<li><a href="#" class="btn-link"><i class="fa fa-google-plus"></i></a></li>
							</ul>
						</div>
						<div class="pt-btn-join">
							<a href="#" class="btn ">Tham gia</a>
						</div>
					</div>
				</div>
			</div>
			<div class="container">
				<div class="row">
					<div class="col-lg-4 col-md-12 col-sm-12 footer-col-4">
						<div class="widget">
							<h5 class="footer-title">GIỚI THIỆU</h5>
							<p class="text-capitalize m-b20">Đặt sân SPM cung cấp các tiện ích thông minh giúp cho bạn tìm sân bãi và đặt sân một cách hiệu quả nhất.</p>
						</div>
					</div>
					<div class="col-12 col-lg-5 col-md-7 col-sm-12">
						<div class="row">
							<div class="col-4 col-lg-4 col-md-4 col-sm-4">
								<div class="widget footer_widget">
									<h5 class="footer-title">THÔNG TIN</h5>
									<ul>
										<li><a href="#">Trang web</a></li>
										<li><a href="#">Đăt sân</a></li>
										<li><a href="#">Liên hệ</a></li>
										<li><a href="#">sự kiện</a></li>
									</ul>
								</div>
							</div>
							<div class="col-4 col-lg-4 col-md-4 col-sm-4">
								<div class="widget footer_widget">
									<h5 class="footer-title">DỊCH VỤ</h5>
									<ul>
										<li><a href="#">Tìm đối</a></li>
										<li><a href="#">Hồ sơ</a></li>
										<li><a href="#">Chăm sóc khách hàng</a></li>
										<li><a href="#">Hoàn tiền</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-lg-3 col-md-5 col-sm-12 footer-col-4">
						<div class="widget widget_gallery gallery-grid-4">
							<h5 class="footer-title">MÔ TẢ</h5>
							<ul class="magnific-image">
								<li><a th:href="@{/assets/images/gallery/pic1.jpg}" class="magnific-anchor"><img th:src="@{/assets/images/gallery/pic1.jpg}" alt=""></a></li>
								<li><a th:href="@{/assets/images/gallery/pic2.jpg}" class="magnific-anchor"><img th:src="@{/assets/images/gallery/pic2.jpg}" alt=""></a></li>
								<li><a th:href="@{/assets/images/gallery/pic3.jpg}" class="magnific-anchor"><img th:src="@{/assets/images/gallery/pic3.jpg}" alt=""></a></li>
								<li><a th:href="@{/assets/images/gallery/pic4.jpg}" class="magnific-anchor"><img th:src="@{/assets/images/gallery/pic4.jpg}" alt=""></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="footer-bottom">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 text-center"><a target="_blank">Group 5 SWP</a></div>
				</div>
			</div>
		</div>
	</footer>
	<!-- Footer END ==== -->
	<button class="back-to-top fa fa-chevron-up" ></button>
</div>
<!-- External JavaScripts -->
<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/vendors/bootstrap/js/popper.min.js}"></script>
<script th:src="@{/assets/vendors/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/assets/vendors/bootstrap-select/bootstrap-select.min.js}"></script>
<script th:src="@{/assets/vendors/bootstrap-touchspin/jquery.bootstrap-touchspin.js}"></script>
<script th:src="@{/assets/vendors/magnific-popup/magnific-popup.js}"></script>
<script th:src="@{/assets/vendors/counter/waypoints-min.js}"></script>
<script th:src="@{/assets/vendors/counter/counterup.min.js}"></script>
<script th:src="@{/assets/vendors/imagesloaded/imagesloaded.js}"></script>
<script th:src="@{/assets/vendors/masonry/masonry.js}"></script>
<script th:src="@{/assets/vendors/masonry/filter.js}"></script>
<script th:src="@{/assets/vendors/owl-carousel/owl.carousel.js}"></script>
<script th:src="@{/assets/js/functions.js}"></script>
<script th:src="@{/assets/js/contact.js}"></script>
<script th:src="@{/assets/vendors/switcher/switcher.js}"></script>
</body>

</html>
