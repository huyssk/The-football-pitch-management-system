<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<!-- Mirrored from educhamp.themetrades.com/demo/admin/teacher-profile.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Feb 2019 13:11:35 GMT -->
<head>

	<!-- META ============================================= -->
	<meta charset="utf-8">
	<!--	<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content=""/>
	<meta name="author" content=""/>
	<meta name="robots" content=""/>

	<!-- DESCRIPTION -->
	<meta name="description" content="SPM: Thuê sân bóng đá uy tín"/>

	<!-- OG -->
	<meta property="og:title" content="SPM: Thuê sân bóng đá uy tín"/>
	<meta property="og:description" content="SPM: Thuê sân bóng đá uy tín"/>
	<meta property="og:image" content=""/>
	<meta name="format-detection" content="telephone=no">

	<!-- FAVICONS ICON ============================================= -->
	<link rel="icon" href="../error-404.html" type="image/x-icon"/>
	<link rel="shortcut icon" type="image/x-icon" th:href="@{/assets/images/favicon.png}"/>

	<!-- PAGE TITLE HERE ============================================= -->
	<title>SPM: Thuê sân bóng đá </title>

	<!-- MOBILE SPECIFIC ============================================= -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!--[if lt IE 9]>
	<script th:src="@{/assets/js/html5shiv.min.js}"></script>
	<script th:src="@{/assets/js/respond.min.js}"></script>
	<![endif]-->

	<!-- All PLUGINS CSS ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/assets.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/vendors/calendar/fullcalendar.css}">
	<!--	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/emmploy.css}">-->
	<!-- TYPOGRAPHY ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/typography.css}">

	<!-- SHORTCODES ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/shortcodes/shortcodes.css}">

	<!-- STYLESHEETS ============================================= -->
	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/style.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/dashboard.css}">
	<link class="skin" rel="stylesheet" type="text/css" th:href="@{/assets/admin/assets/css/color/color-1.css}">
	<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">-->

</head>

<body class="ttr-opened-sidebar ttr-pinned-sidebar">
<!-- header start -->
<header class="ttr-header">
	<div class="ttr-header-wrapper">
		<!--logo start -->
		<div class="ttr-logo-box">
			<div>
				<a th:href="@{/spm/home}" class="ttr-logo">
					<img alt="" class="ttr-logo-mobile" th:src="@{/assets/images/logo.png}" width="30" height="30">
					<img alt="" class="ttr-logo-desktop" th:src="@{/assets/images/logo.png}" width="90" height="27">
				</a>
			</div>
		</div>
		<!--logo end -->
		<div class="ttr-header-menu">
			<!-- header left menu start -->
			<ul class="ttr-header-navigation">
				<li>
					<a th:href="@{/spm/home}" class="ttr-material-button ttr-submenu-toggle">TRANG CHỦ</a>
				</li>

			</ul>
			<!-- header left menu end -->
		</div>
		<div class="ttr-header-right ttr-with-seperator">
			<!-- header right menu start -->
			<ul class="ttr-header-navigation">
				<!--<li>
					<a href="#" class="ttr-material-button ttr-search-toggle"><i class="fa fa-search"></i></a>
				</li>-->
				<li>
					<a href="#" class="ttr-material-button ttr-submenu-toggle"><span class="ttr-user-avatar"><img alt=""
																												  th:src="@{/assets/admin/assets/images/testimonials/pic3.jpg}"
																												  width="32"
																												  height="32"></span></a>

				</li>
				<li class="ttr-hide-on-mobile">
					<a href="#" class="ttr-material-button"><i class="ti-layout-grid3-alt"></i></a>
					<div class="ttr-header-submenu ttr-extra-menu">
						<a href="#">
							<i class="fa fa-music"></i>
							<span>Musics</span>
						</a>
						<a href="#">
							<i class="fa fa-youtube-play"></i>
							<span>Videos</span>
						</a>
						<a href="#">
							<i class="fa fa-envelope"></i>
							<span>Emails</span>
						</a>
						<a href="#">
							<i class="fa fa-book"></i>
							<span>Reports</span>
						</a>
						<a href="#">
							<i class="fa fa-smile-o"></i>
							<span>Persons</span>
						</a>
						<a href="#">
							<i class="fa fa-picture-o"></i>
							<span>Pictures</span>
						</a>
					</div>
				</li>
			</ul>
			<!-- header right menu end -->
		</div>
		<!--header search panel start -->
		<div class="ttr-search-bar">
			<form class="ttr-search-form">
				<div class="ttr-search-input-wrapper">
					<input type="text" name="qq" placeholder="search something..." class="ttr-search-input">
					<button type="submit" name="search" class="ttr-search-submit"><i class="ti-arrow-right"></i>
					</button>
				</div>
				<span class="ttr-search-close ttr-search-toggle">
						<i class="ti-close"></i>
					</span>
			</form>
		</div>
		<!--header search panel end -->
	</div>
</header>
<!-- header end -->
<!-- Left sidebar menu start -->
<div class="ttr-sidebar">
	<div class="ttr-sidebar-wrapper content-scroll">
		<!-- side menu logo start -->
		<!-- side menu logo end -->
		<!-- sidebar menu start -->
		<nav class="ttr-sidebar-navi">
			<ul>
				<li>
					<a th:href="@{/admin/dashboard26}" class="ttr-material-button">
						<!--<span class="ttr-icon"><i class="ti-book"></i></span>-->
						<span class="ttr-label">Thống kê</span>
					</a>
				</li>
				<li>
					<a  th:href="@{/admin/showEmployee}" class="ttr-material-button">
						<!--<span class="ttr-icon"><i class="ti-home"></i></span>-->
						<span class="ttr-label">Quản lý nhân viên</span>
					</a>
				</li>
				<li>
					<a th:href="@{/admin/showBookings}" class="ttr-material-button">
						<!--<span class="ttr-icon"><i class="ti-book"></i></span>-->
						<span class="ttr-label">Yêu cầu thuê</span>
						<!--<span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>-->
					</a>
				</li>
				<li>
					<a th:href="@{/admin/cancellation-requests}" class="ttr-material-button">
						<!--<span class="ttr-icon"><i class="ti-email"></i></span>-->
						<span class="ttr-label">Yêu cầu hủy</span>
						<!--<span><i class="fa fa-angle-down"></i></span>-->
					</a>

				</li>
				<li>
					<a th:href="@{/admin/edit}" class="ttr-material-button">
						<!--<span class="ttr-icon"><i class="ti-email"></i></span>-->
						<span class="ttr-label">Quản lí sân bóng</span>
						<!--<span><i class="fa fa-angle-down"></i></span>-->
					</a>

				</li>


			</ul>
			<!-- sidebar menu end -->
		</nav>
		<!-- sidebar menu end -->
	</div>
</div>


<br><br>
<main class="ttr-wrapper">
	<div class="container-fluid">
		<div class="db-breadcrumb">
			<h4 class="breadcrumb-title">Quản trị</h4>
			<ul class="db-breadcrumb-list">
				<li><a th:href="@{/spm/home}">Home</a></li>
				<li>Danh sách nhân viên</li>
			</ul>
		</div>
		<div class="row">
			<div class="col-12">
				<h2>Danh sách nhân viên</h2>
				<button class="btn mb-3" style="background-color: #28a745; border-color: #28a745; color: white;" data-toggle="modal" data-target="#addEmployeeModal">
					Thêm nhân viên
				</button>

				<table class="table table-bordered table-striped">
					<thead>
					<tr>
						<th>Tên nhân viên</th>
						<th>Email</th>
						<th>Số điện thoại</th>
						<!--<th>Password</th>-->
						<th>Chức năng</th>
						<th>Hoạt Động</th>
					</tr>
					</thead>
					<tbody>
					<tr>
					<tr th:each="employee : ${employees}">
						<td th:text="${employee.fullName}">Fullname</td>
						<td th:text="${employee.email}">Email</td>
						<td th:text="${employee.phoneNumber}">Phone</td>
						<td th:text="${employee.password}" hidden="hidden">Password</td>
						<td th:text="${employee.roles.getRoleName()}">Role</td>

						<td>
							<a th:href="@{/admin/editEmployee(email=${employee.email})}" class="btn" style="background-color: #5bc0de; border-color: #46b8da; color: white;">Chỉnh sửa</a>
							<a th:href="@{/admin/deleteEmployee(email=${employee.email})}" class="btn" style="background-color: #d9534f; border-color: #d43f3a; color: white;"
							   onclick="return confirm('Bạn có chắc xóa không');">Xóa</a>
						</td>

					</tr>


					</tbody>
				</table>
			</div>
		</div>
		<!-- Your Profile Views Chart END-->
	</div>
	</div>
</main>


<div class="modal fade" id="addEmployeeModal">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Thêm nhân viên</h5>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<div class="modal-body">
				<form id="addEmployeeForm"  th:object="${registerUser}"> <!--method="post"--> <!--th:action="@{/admin/add_process}"-->
					<div class="form-group">
						<label for="fullname">Tên nhân viên</label>
						<input type="text" class="form-control" id="fullname" name="fullname" th:field="*{fullname}" required>
					</div>
					<div class="form-group">
						<label for="email">Email</label>
						<input type="email" class="form-control" id="email" name="email" th:field="*{email}" required>
					</div>
					<div class="form-group">
						<label for="password">Mật khẩu</label>
						<input type="password" class="form-control" id="password" name="password" th:field="*{password}" required>
					</div>
					<div class="form-group">
						<label for="phone">Số điện thoại</label>
						<input type="text" class="form-control" id="phone" name="phone" th:field="*{phone}" required>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-primary">Thêm</button>
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script>

	$(document).ready(function() {
		$('#addEmployeeForm').on('submit', function(e) {
			e.preventDefault();
			$.ajax({
				url: '/admin/add_process',
				type: 'POST',
				data: $(this).serialize(),
				dataType: 'json',
				success: function(response) {
					if (response.success) {
						alert('Thêm nhân viên thành công!');
						$('#addEmployeeModal').modal('hide');
						location.reload();
					} else {
						showErrors(response.errors);
					}
				},
				error: function(xhr) {
					console.log('Error status:', xhr.status);
					console.log('Response text:', xhr.responseText);

					if (xhr.status === 400) {
						const response = JSON.parse(xhr.responseText);
						showErrors(response.errors);
					} else {
						alert('Đã xảy ra lỗi. Vui lòng thử lại.');
					}
				}
			});
		});


		function showErrors(errors) {
			// Xóa tất cả thông báo lỗi cũ
			$('.error-message').remove();

			// Hiển thị lỗi mới
			$.each(errors, function(field, messages) {
				var inputField = $('#' + field);
				var errorHtml = '<div class="error-message text-danger">';
				$.each(messages, function(index, message) {
					errorHtml += '<p>' + message + '</p>';
				});
				errorHtml += '</div>';
				inputField.after(errorHtml);
			});
		}

		// Chỉ reset form khi mở modal mới
		$('#addEmployeeModal').on('show.bs.modal', function (e) {
			$('#addEmployeeForm')[0].reset();
			$('.error-message').remove();
		});
	});
</script>
<script th:src="@{/assets/admin/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/bootstrap/js/popper.min.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/bootstrap-select/bootstrap-select.min.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/bootstrap-touchspin/jquery.bootstrap-touchspin.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/magnific-popup/magnific-popup.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/counter/waypoints-min.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/counter/counterup.min.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/imagesloaded/imagesloaded.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/masonry/masonry.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/masonry/filter.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/owl-carousel/owl.carousel.js}"></script>
<script th:src='@{/assets/admin/assets/vendors/scroll/scrollbar.min.js}'></script>
<script th:src="@{/assets/admin/assets/js/functions.js}"></script>
<script th:src="@{/assets/admin/assets/vendors/chart/chart.min.js}"></script>
<script th:src="@{/assets/admin/assets/js/admin.js}"></script>
<script th:src='@{/assets/admin/assets/vendors/switcher/switcher.js}'></script>
<script>
	// Pricing add
	function newMenuItem() {
		var newElem = $('tr.list-item').first().clone();
		newElem.find('input').val('');
		newElem.appendTo('table#item-add');
	}

	if ($("table#item-add").is('*')) {
		$('.add-item').on('click', function (e) {
			e.preventDefault();
			newMenuItem();
		});
		$(document).on("click", "#item-add .delete", function (e) {
			e.preventDefault();
			$(this).parent().parent().parent().parent().remove();
		});
	}
</script>
</body>

<!-- Mirrored from educhamp.themetrades.com/demo/admin/teacher-profile.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Feb 2019 13:11:35 GMT -->
</html>

